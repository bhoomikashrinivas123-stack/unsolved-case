<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The Unsolved Case</title>

<style>
*{margin:0;padding:0;box-sizing:border-box}
body{
font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;
background:linear-gradient(135deg,#1a1a2e,#16213e);
color:#e0e0e0;
min-height:100vh;
display:flex;
justify-content:center;
align-items:center;
padding:20px
}
.container{
max-width:1100px;
width:100%;
background:#0f3460;
border-radius:12px;
display:grid;
grid-template-columns:1fr 300px;
overflow:hidden
}
.main-content{padding:30px}
.sidebar{
background:#0a1e35;
padding:20px;
border-left:2px solid #e94560
}
h1{color:#e94560}
.room-title{color:#16c784;margin:10px 0}
.visual-clues{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(140px,1fr));
gap:15px;margin-top:15px
}
.clue-image{
background:rgba(255,255,255,.1);
border:2px solid #16c784;
border-radius:8px;
height:180px;
display:flex;
flex-direction:column;
align-items:center;
justify-content:center;
cursor:pointer;
transition:.2s
}
.clue-image:hover{
border-color:#e94560;
transform:scale(1.05)
}
.timer{
border:2px solid #e94560;
padding:12px;
border-radius:8px;
text-align:center;
font-family:monospace;
font-size:22px;
margin-bottom:15px
}
input{
padding:10px;
border-radius:6px;
border:2px solid #16c784;
background:transparent;
color:#fff;
width:100%
}
button{
padding:10px 16px;
background:#e94560;
border:none;
color:#fff;
border-radius:6px;
cursor:pointer;
margin-top:10px
}
.message.success{color:#16c784}
.message.error{color:#e94560}
.hint-button{
margin-top:10px;
cursor:pointer;
color:#16c784;
font-size:18px
}
.next-room{
background:#16c784;
color:#000;
font-weight:bold
}
.play-again{
margin-top:30px;
font-size:32px;
cursor:pointer;
color:#16c784
}
.image-modal{
display:none;
position:fixed;
inset:0;
background:rgba(0,0,0,.9);
align-items:center;
justify-content:center;
z-index:10
}
.image-modal.active{display:flex}
.modal-content{
background:#0f3460;
padding:30px;
border-radius:10px;
text-align:center;
max-width:520px;
position:relative
}
.modal-close{
position:absolute;
top:10px;
right:10px
}
.final-screen{
max-height:90vh;
overflow-y:auto;
}
.final-riddle{
margin-top:30px;
padding:20px;
border:2px solid #16c784;
border-radius:10px
}
</style>
</head>

<body>

<div class="container" id="gameContainer">
<div class="main-content">
<h1>üîç The Unsolved Case</h1>
<div class="room-title" id="roomTitle"></div>
<div class="timer" id="timerDisplay"></div>
<div id="roomContent"></div>
</div>

<div class="sidebar">
<p><strong>Room:</strong> <span id="roomNumber"></span></p>
<p><strong>Hints used:</strong> <span id="hintsUsed">0</span></p>
<p id="progressText">0% Complete</p>
<h3>Evidence</h3>
<div id="evidenceList"></div>
</div>
</div>

<div class="image-modal" id="imageModal">
<div class="modal-content">
<button class="modal-close" onclick="closeImageModal()">X</button>
<div id="modalImage" style="font-size:120px"></div>
<div id="modalDescription"></div>
<div id="modalActions"></div>
</div>
</div>

<audio id="successSound">
<source src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3">
</audio>
<audio id="errorSound">
<source src="https://assets.mixkit.co/sfx/preview/mixkit-wrong-answer-fail-notification-946.mp3">
</audio>

<script>
const gameState={
currentRoom:0,
hintsUsed:0,
solved:new Set(),
evidence:new Set(),
timeRemaining:0,
timer:null,
roomFlags:{},
cooldownActive:false
};

const rooms=[{
title:"Room 1: The Crime Scene",
timeLimit:300,
story:"A diamond vanished. Investigate visual clues.",
visualClues:[
{emoji:"üìù",label:"Note Found",description:"Meet at 1_:3_"},
{emoji:"üïê",label:"Clock",description:"Clock shows 3:30 PM"},
{emoji:"üîí",label:"Safe Lock",description:"4-digit safe opened during gap"},
{emoji:"üìä",label:"Security Log",description:"Suspicious activity near the vault"}
],
puzzle:{question:"What time was the diamond stolen? (HH:MM)",answer:"15:30"},
evidence:"Security Log Extract",
hint:"The note becomes clearer under UV light"
}];

function formatTime(s){
return `${Math.floor(s/60)}:${(s%60).toString().padStart(2,"0")}`;
}

function loadRoom(i){
gameState.currentRoom=i;
gameState.timeRemaining=rooms[i].timeLimit;
gameState.roomFlags[i]={uvTime:120,revealed:false};
document.getElementById("roomTitle").textContent=rooms[i].title;
document.getElementById("roomNumber").textContent=`${i+1}/1`;
document.getElementById("roomContent").innerHTML=`
<p>${rooms[i].story}</p>
<div class="visual-clues">
${rooms[i].visualClues.map((c,idx)=>`
<div class="clue-image" onclick="openImageModal(${idx})">
<div style="font-size:60px">${c.emoji}</div>
<div>${c.label}</div>
</div>`).join("")}
</div>
<p>${rooms[i].puzzle.question}</p>
<input id="answerInput">
<button onclick="submitAnswer(event)">Submit</button>
<div id="message"></div>
`;
startTimer();
}

function startTimer(){
clearInterval(gameState.timer);
gameState.timer=setInterval(()=>{
gameState.timeRemaining--;
document.getElementById("timerDisplay").textContent=`‚è± ${formatTime(gameState.timeRemaining)}`;
},1000);
}

function openImageModal(i){
const clue=rooms[0].visualClues[i];
const flags=gameState.roomFlags[0];
document.getElementById("modalImage").textContent=clue.emoji;
const desc=document.getElementById("modalDescription");
const actions=document.getElementById("modalActions");
actions.innerHTML="";
if(clue.label==="Note Found"){
if(flags.revealed){
desc.innerHTML="<strong>Revealed:</strong> Meet at 15:30";
}else{
desc.innerHTML=`${clue.description}<br><br>UV warming: ${flags.uvTime}s`;
const btn=document.createElement("button");
btn.textContent="Use UV Lamp";
btn.onclick=()=>{
const uv=setInterval(()=>{
flags.uvTime--;
desc.innerHTML=`${clue.description}<br><br>UV warming: ${flags.uvTime}s`;
if(flags.uvTime<=0){
clearInterval(uv);
flags.revealed=true;
desc.innerHTML="<strong>Revealed:</strong> Meet at 15:30";
}
},1000);
};
actions.appendChild(btn);
}
}else desc.textContent=clue.description;
document.getElementById("imageModal").classList.add("active");
}
function closeImageModal(){
document.getElementById("imageModal").classList.remove("active");
}

function submitAnswer(e){
const input=document.getElementById("answerInput");
const msg=document.getElementById("message");
if(input.value==="15:30"){
msg.className="message success";
msg.textContent="Correct!";
successSound.play();
document.getElementById("gameContainer").innerHTML=`
<div class="final-screen" style="padding:40px;text-align:center">
<h1 style="color:#16c784">üèÜ Case Closed!</h1>
<div class="final-riddle">
<p><em>No wires in sight, yet minds are linked,<br>
A room where signals are tested and synced.</em></p>
<strong>Name this place.</strong>
<input id="riddleInput">
<button onclick="checkRiddle()">Submit</button>
<div id="riddleMsg"></div>
</div>
<div class="play-again" onclick="location.reload()">üîÑ Play Again</div>
</div>`;
}
}

function checkRiddle(){
const v=document.getElementById("riddleInput").value.toLowerCase();
document.getElementById("riddleMsg").textContent=
["internet lab","internetlab"].includes(v)?"‚úÖ Correct!":"‚ùå Try again";
}

loadRoom(0);
</script>
</body>
</html>
